// Generated by CoffeeScript 1.6.2
(function() {
  var _firstTarget;

  _firstTarget = function(target, keyParts, set) {
    var ct, currentTarget, firstKey;

    currentTarget = target;
    firstKey = keyParts.shift();
    if (target.__isBindable) {
      currentTarget = target.data;
      ct = currentTarget[firstKey];
      if ((ct === void 0) || (ct === null)) {
        ct = target[firstKey];
      }
    } else {
      ct = currentTarget[firstKey];
    }
    if (set && !ct) {
      ct = currentTarget[firstKey] = {};
    }
    return ct;
  };

  exports.get = function(target, key) {
    var ct, i, keyParts, _i, _len;

    if (!target || !key) {
      return;
    }
    ct = _firstTarget(target, keyParts = key.split("."));
    for (i = _i = 0, _len = keyParts.length; _i < _len; i = ++_i) {
      key = keyParts[i];
      if (!ct) {
        return;
      }
      if (ct.__isBindable) {
        return ct.get(keyParts.slice(i).join("."));
      }
      ct = ct[key];
    }
    return ct;
  };

  exports.set = function(target, key, value) {
    var ct, i, k, keyParts, n, nv, _i;

    if (!target || !key) {
      return;
    }
    keyParts = key.split(".");
    if (keyParts.length === 1) {
      target.data[keyParts[0]] = value;
      return;
    }
    ct = target.data;
    n = keyParts.length;
    for (i = _i = 0; 0 <= n ? _i <= n : _i >= n; i = 0 <= n ? ++_i : --_i) {
      k = keyParts[i];
      if (ct.__isBindable) {
        ct.set(keyParts.slice(i).join("."), value);
        return;
      } else {
        if (i === n - 1) {
          ct[k] = value;
          break;
        } else {
          nv = ct[k];
          if (!nv || (typeof nv !== "object")) {
            nv = ct[k] = {};
          }
          ct = nv;
        }
      }
    }
  };

}).call(this);
